---
layout: post
title: Namespace SSL kurulumu
date: '2017-03-23T19:19:00.001-07:00'
author: Şahin
tags: 
modified_time: '2017-03-23T19:21:25.012-07:00'
blogger_id: tag:blogger.com,1999:blog-29334203.post-26834229572893973
blogger_orig_url: https://sahinyanlik.blogspot.com/2017/03/namespace-ssl-kurulumu.html
---

<h1></h1>Öncelikle tüm yapacaklarınızın bir klasör içinde olmasına özen gösterin. <br /><br /><b>1) keytool ile csr oluşturma.</b><br /><br /><div style="padding-left: 30pt;">Ssl oluşturmanın birinci adımı csr dosyası oluşturmak bunun için bilgisayarınızda jdk kurulu olması gerekmektedir.<br />Şu anda bizim JDK'mız <a class="file" href="https://www.blogger.com/null" title="/opt/jdk_1.706">/opt/jdk_1.706</a> içerisinde bulunuyor.  </div><div style="padding-left: 30pt;">sudo /opt/jdk_1.706/bin/keytool -genkey -keysize 2048 -keyalg RSA -alias tomcat -keystore yourkeystore.jks </div><div style="padding-left: 30pt;">Burada dikkat etmemiz gereken bir yer var. Alias'ı unutmamanız lazım, o yüzden bırakın tomcat kalsın, ikinci olarak bir şifre yazmanız gerekecek, bu şifreyi de bir yere not alın, çünkü ileride ihtiyacınız olacak. Ve lütfen tek şifre kullanın ki karıştırmayın. Yukarıdaki kodu çalıştırdıktan sonra size bir kaç soru soracak. Birincisi, ve en önemlisi what is your first name and last name bölümüne cevaben sitenin ismini yazmamız lazım. Bizim bu durumda sitenin ismi getform.org , diğer bölümleri farklı değerlerle geçiştirebilirsiniz. </div><div style="padding-left: 30pt;">Bu işlem sonunda elimizde bir jks dosyası olacak. Dikkat ederseniz amacımız başlıkta da olduğu gibi csr oluşturmak. Elimizdeki keystore'dan csr oluşturacağız şimdi. </div><div style="padding-left: 30pt;">sudo /opt/jdk_1.706/bin/keytool -certreq -alias tomcat -file your.csr -keystore yourkeystore.jks </div><div style="padding-left: 30pt;">evet artık elimizde your.csr adında bir dosya var. Bizim durumumuzda ssl'i issue etmek için namecheap sitesine gitmemiz gerekmekte. Sitede ssl' sertifikamızı issue etmek için bir ekran ve bu ekrada bir textarea var. Buraya your.csr içerisindeki texti yapıştırmamız lazım. Ben vim kullandım; </div><div style="padding-left: 30pt;">vim your.csr  </div><div style="padding-left: 30pt;">Sonra içindekileri kopyalayıp browsera yapıştırdım. Browserda tüm değerleri kendisi doldurması lazım. Yani sizin encript edilmiş değerleriniz decript edip bulması lazım. <br />Next next diyip bu işlemi bitiriyoruz. En son adımda size nasıl validate etme istediğinizi soracaktır. Ben mail ile validate ettim. </div><b>2) Dosyaları indirip tomcat'e tanıtma olayı</b><br /><ol start="1" style="padding-left: 30pt;" type="1"><li>işlemi bitirdikten sonra tekrardan namecheap sitesine gidip dosyaları indirmemiz gerekmekte. Bu indirmek işleminden sonra 3 dosya gelecek bize. Bu dosyaların uzantısı şu şekilde;</li></ol><div style="padding-left: 60pt;">getform_org.crt , getform_org.ca-bundle ve p7b  </div><div style="padding-left: 30pt;">Kısaca açıklayacak olursak; crt bizim domaine has dosya, yani başka yere kullansanız da çalışmayacak birşey. Normalde tek dosya yeterli fakat bir defa daha şifrelemek için ca-bundle adında bir dosya var. Bunların hepsini içeren bir de p7b adlı dosya var. En kolayı da sonuncusu. Dikkat etmemiz gereken bir nokta : <b>TÜM DOSYALARI DAHA ÖNCE CSR OLUŞTURDUĞUNUZ KLASÖRÜN İÇİNE KOYUN. </b><br />Artık yapacağınız basit; </div><div style="padding-left: 60pt;">sudo /opt/jdk_1.706/bin/keytool -import -trustcacerts -alias tomcat -file yourcertificate.p7b -keystore yourkeystore.jks </div><div style="padding-left: 30pt;">Keystore'un ismi gördüğünüz gibi aynı kalacak yourcertificat.p7b bizim durumumuzda getform_org.p7b olacak sonrasında aliasi kontrol edin, ilk yaptığımız la aynı olduğunu göreceksiniz.Bu kod çalıştırdıktan sonra keystore'unuza tüm doğrulamalar yüklenmiş olacak. Eğer ki x.509 gibi bir hata görüyorsanız daha önceki adımları tekrar kontrol edin. </div><br />3)<b> Tomcat'e yükleme</b><br /><br /><div style="padding-left: 60pt;">Bu adım için tomcat dizinine gidin. ardından conf klasörüne girerek server.xml dosyasını açın. </div><div style="padding-left: 120pt;">bizde bu dosya <a class="file" href="https://www.blogger.com/null" title="/usr/local/Tomcat/apace-asdfsadf/conf">/usr/local/Tomcat/apace-asdfsadf/conf</a></div><div style="padding-left: 30pt;">Vim ile bu dosyayı açtıktan sonra bulmanız gereken  keyStoreFile bölümüne keystore'un path'ini göstermek ve keystorePass'e daha önce bir yere not etmenizi söylediğim şifreyi yazmak.  </div><div style="padding-left: 30pt;"><connector b="" port="443" protocol="org.apache.coyote.http11.Http11Protocol">keystoreFile="asdfasdfsaf/getform_keystore.jks" </connector></div><b></b><br /><div style="padding-left: 120pt;"><b>   keystorePass="XXXXX"</b> maxThreads="150" SSLEnabled="true" scheme="https" secure="true" </div><div style="padding-left: 60pt;">ciphers="TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256,TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA,TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384,<br />TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA,TLS_RSA_WITH_AES_128_CBC_SHA256,TLS_RSA_WITH_AES_128_CBC_SHA,<br />TLS_RSA_WITH_AES_256_CBC_SHA256,TLS_RSA_WITH_AES_256_CBC_SHA" </div><div style="padding-left: 150pt;">clientAuth="false" sslProtocol="TLS"<br />URIEncoding="UTF-8"<br />/&gt; </div><div style="padding-left: 60pt;"><!-- Define an AJP 1.3 Connector on port 8009 --><br /><connector a="" class="file" port="8009" protocol="AJP/1.3" redirectport="8443" title="/&gt;">/&gt;</connector></div><br /><div style="padding-left: 30pt;">daha sonra <a class="file" href="https://www.blogger.com/null" title="./shutdown.sh">./shutdown.sh</a> ve <a class="file" href="https://www.blogger.com/null" title="./startup.sh">./startup.sh</a> ile tomcat'inizi restart etmek. </div><div style="padding-left: 30pt;">Böylece sisteminize namespace'den alımış bir ssl sertifikayı yüklemiş oldunuz. </div><br /><br />